FROM golang:{{ .GOVersion }}-alpine{{ .AlpineVersion }}

ADD {{ .WASMMuslc.URL }} /lib/libwasmvm_muslc.a
RUN sha256sum /lib/libwasmvm_muslc.a | grep {{ .WASMMuslc.Hash }} && \
  apk add --no-cache gcc make libc-dev linux-headers ca-certificates build-base

ENTRYPOINT ["go"]
